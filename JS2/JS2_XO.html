<!DOCTYPE html>
<html>
    <head>
        <title>X and 0</title>
        <link rel="stylesheet" href="./style.css">
    </head>
    <body>
        <div id="container">
            <div id="cell_00" class="cell" onclick="changeCell(0,0)"></div>
            <div id="cell_01" class="cell" onclick="changeCell(0,1)"></div>
            <div id="cell_02" class="cell" onclick="changeCell(0,2)"></div>
            <div id="cell_10" class="cell" onclick="changeCell(1,0)"></div>
            <div id="cell_11" class="cell" onclick="changeCell(1,1)"></div>
            <div id="cell_12" class="cell" onclick="changeCell(1,2)"></div>
            <div id="cell_20" class="cell" onclick="changeCell(2,0)"></div>
            <div id="cell_21" class="cell" onclick="changeCell(2,1)"></div>
            <div id="cell_22" class="cell" onclick="changeCell(2,2)"></div>
        </div>
        <h1 id="next_player"></h1>
        <button type="button" onclick="reset()">Reseteaza jocul!</button>
        <script>
            let player = false;
            let next_player = document.getElementById("next_player");
            const textJucator1 = "Este randul primului jucator";
            const textJucator2 = "Este randul jucatorului 2"
            next_player.innerText = textJucator1;

            const xoMatrix = [
                ["", "", ""],
                ["", "", ""],
                ["", "", ""],
            ];



            function isWinner() {
                let isEmptySpace = false;
                xoMatrix.forEach((rand, randIndex) => {
                    rand.forEach((cell, cellIndex) => {
                        if (cell === "") {
                            isEmptySpace = true;
                        }
                    })
                })


                // Verificare Rand -- 1
                if(xoMatrix[0][0] === "0" && xoMatrix[0][1] === "0" && xoMatrix[0][2] ==="0") {
                    alert("Player cu 0 a castigat");
                }

                if(xoMatrix[0][0] === "X" && xoMatrix[0][1] === "X" && xoMatrix[0][2] ==="X") {
                    alert("Player cu X a castigat");
                }

                // Verificare Rand -- 2
                if(xoMatrix[1][0] === "0" && xoMatrix[1][1] === "0" && xoMatrix[1][2] ==="0") {
                    alert("Player cu 0 a castigat");
                }

                if(xoMatrix[1][0] === "X" && xoMatrix[1][1] === "X" && xoMatrix[1][2] ==="X") {
                    alert("Player cu X a castigat");
                }

                // Verificare Rand -- 3
                if(xoMatrix[2][0] === "0" && xoMatrix[2][1] === "0" && xoMatrix[2][2] ==="0") {
                    alert("Player cu 0 a castigat");
                }

                if(xoMatrix[2][0] === "X" && xoMatrix[2][1] === "X" && xoMatrix[2][2] ==="X") {
                    alert("Player cu X a castigat");
                }

                // Verificare diagonala
                if(xoMatrix[0][0] === "0" && xoMatrix[1][1] === "0" && xoMatrix[2][2] ==="0") {
                    alert("Player cu 0 a castigat pe diagonala");
                }

                if(xoMatrix[0][0] === "X" && xoMatrix[1][1] === "X" && xoMatrix[2][2] ==="X") {
                    alert("Player cu 0 a castigat pe diagonala");
                }

                //Verificare diagonala 2
                if(xoMatrix[0][2] === "0" && xoMatrix[1][1] === "0" && xoMatrix[2][0] === "0") {
                    alert("Player cu 0 a castigat pe diagonala");
                }

                if(xoMatrix[0][2] === "X" && xoMatrix[1][1] === "X" && xoMatrix[2][0] === "X") {
                    alert("Player cu X a castigat pe diagonala");
                }


                if (!isEmptySpace) {
                    alert("Jocul nu mai poate continua!")
                }
            }

            function changeCell(rand, coloana) {
                let cell = document.getElementById("cell_"+rand+coloana);

                if(cell.innerText.length <= 0) {
                    if(player === false) {
                        cell.innerText = "X";
                        xoMatrix[rand][coloana] = "X";
                        player = true;
                        next_player.innerText = textJucator2;
                        cell.classList.add("x_cell");
                    } else {
                        cell.innerText = "0";
                        xoMatrix[rand][coloana] = "0";
                        player = false;
                        next_player.innerText = textJucator1;
                        cell.classList.add("o_cell");
                    }
                } 
                isWinner();

            }  

            function reset() {
                xoMatrix.forEach((rand, randIndex) => {
                    rand.forEach((cell, cellIndex) => {
                        let elementCell = document.getElementById("cell_"+randIndex+cellIndex);

                        if(cell === "0") {
                            elementCell.classList.remove("o_cell");
                        } else if( cell === "X") {
                             elementCell.classList.remove("x_cell");
                        }
                        elementCell.innerText = "";
                        xoMatrix[randIndex][cellIndex] = "";
                        
                    })
                })
            }

            
            

        </script>
    </body>
</html>